// Mochi Publisher app
// Copyright Alistair Cunningham 2025

{
	"version": "1.62",
	"label": "app_name",
	"paths": ["publisher"],
	"services": ["publisher"],

	"classes": ["app"],
	"architecture": {"engine": "starlark", "version": 4},
	"execute": ["publisher.star"],

	"database": {
		"schema": 2,
		"file": "publisher.db",
		"create": {"function": "database_create"},
		"upgrade": {"function": "database_upgrade"}
	},

	"icons": [
		{"action": "", "label": "app_name", "file": "images/icon.svg"}
	],

	"actions": {
		"": {"file": "web/dist/index.html"},
		"assets": {"files": "web/dist/assets"},
		"images": {"files": "web/dist/images"},
		"-/list": {"function": "action_list"},
		"app/:app": {"file": "web/dist/index.html", "public": true},
		"-/view": {"function": "action_view", "public": true},
		"-/create": {"function": "action_create"},
		":app/-/version/create": {"function": "action_version_create"},
		":app/-/track/create": {"function": "action_track_create"},
		":app/-/track/set": {"function": "action_track_set"},
		":app/-/track/delete": {"function": "action_track_delete"},
		":app/-/default-track/set": {"function": "action_default_track_set"}
	},

	"events": {
		"information": {"function": "event_information", "anonymous": true, "services": ["apps"]},
		"get": {"function": "event_get", "anonymous": true, "services": ["apps"]},
		"version": {"function": "event_version", "anonymous": true, "services": ["apps"]}
	},

	"functions": {
		"tracks": {"function": "function_tracks"}
	}
}
